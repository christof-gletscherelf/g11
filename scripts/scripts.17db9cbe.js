"use strict";angular.module("gletscherelfApp",["ngResource"]),angular.module("gletscherelfApp",["heatmap","ya.nouislider"]).controller("MainCtrl",["$scope","$heatmap","$http",function(a,b,c){function d(a){for(var b=100,c=1,d=1400,e=990,f=[];a--;)f.push({x:Math.random()*d>>0,y:Math.random()*e>>0,value:Math.random()*b+c>>0,radius:50*Math.random()+c>>0});return{max:b,min:c,data:f}}function e(a){var b=i.indexOf(a);return-1!==b?1:2}function f(b,c){var d={};return d.max=a.gameData.max,d.min=a.gameData.min,d.data=a.gameData.data.slice(60*b,60*c),d}function g(b,c){c>800&&(c=800),a.distancePeriod=a.gameData.data[c].totalDistance-a.gameData.data[b].totalDistance,a.distanceTotal=a.gameData.data[c].totalDistance,a.speedPeriod=a.distancePeriod/(c-b)*3.6,a.speedTotal=a.distanceTotal/c*3.6}function h(){var b=l.options.start[0],c=l.options.start[1];a.heatmapData=f(b,c),g(60*b,60*c)}a.gameData={},a.heatmapConfig={blur:.9,opacity:.5},a.updateData=function(){a.heatmapData=d(5400)};var i=[12,31,88],j=[0,15,30,45,60,75,90],k=i.concat(j),l=this;l.options={start:[0,2],behaviour:"drag",step:1,connect:!0,range:{min:0,max:90},format:wNumb({decimals:2}),pips:{mode:"values",values:k,filter:e}},l.events={update:h.bind(void 0)},a.loadData=function(b){c.get("data/"+b).then(function(b){a.gameData=b.data.gameData,a.heatmapData=a.gameData,h()})}}]),angular.module("gletscherelfApp").run(["$templateCache",function(a){a.put("views/main.html",'<heatmap id="heatmapContainer" data="heatmapData" config="heatmapConfig" ng-click="updateData()"> <img id="footballfield" src="images/bg.fa642d17.jpg"> </heatmap> <div class="row"> <div ya-no-ui-slider="ctrl.options" ya-no-ui-slider-events="ctrl.events"></div> </div> <img id="christof" src="images/christof.736ed1b1.jpg" ng-click="loadData(\'final/christof.json\')"> <img id="ambros" src="images/ambros.62efcf31.jpg" ng-click="loadData(\'final/ambros.json\')"> <div class="row"> From minute <input type="number" ng-model="ctrl.options.start[0]"> to minute <input type="number" ng-model="ctrl.options.start[1]"> <button ng-click="ctrl.options.start = [0, 45]">first half</button> <button ng-click="ctrl.options.start = [45, 90]">second half</button> <button ng-click="ctrl.options.start = [11, 12]">1 : 0</button> <button ng-click="ctrl.options.start = [30, 31]">1 : 1</button> <button ng-click="ctrl.options.start = [87, 88]">1 : 2</button> <!-- use central minute to show current position / to scroll / ... --> <!--\n  current minute\n  <input type="number" ng-model="currentMinute"/>\n  --> </div> <div class="row"> <table> <tr> <th colspan="3">{{ gameData.team }}</th> </tr> <tr> <th colspan="1">{{ gameData.name }}</th> <th colspan="2">{{ gameData.position }}</th> </tr> <tr> <td colspan="4"></td> </tr> <tr> <th></th> <th>Selected Period</th> <th>Total by end of period</th> </tr> <tr> <th>Distance</th> <td>{{ distancePeriod | number:1 }} m</td> <td>{{ distanceTotal | number:1 }} m</td> </tr> <tr> <th>Average Speed</th> <td>{{ speedPeriod | number:1 }} km/h</td> <td>{{ speedTotal | number:1 }} km/h</td> </tr> </table> </div> <!-- download a generated json file --> <!-- <div class="row">\n  <a id="downloadAnchorElem">download json</a>\n</div> -->')}]);